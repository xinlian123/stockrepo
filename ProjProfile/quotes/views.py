from django.shortcuts import render

# Create your views here.
def home(request):
    import requests
    import json
    null = None
    false = False
    true = True
    apiGainer_response = [{"symbol":"TSG","companyName":"The Stars Group, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":19.55,"latestSource":"IEX real time price","latestTime":"9:37:06 AM","latestUpdate":1570023426877,"latestVolume":null,"iexRealtimePrice":19.55,"iexRealtimeSize":100,"iexLastUpdated":1570023426877,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":15.31,"previousVolume":1797664,"change":4.24,"changePercent":0.27694,"volume":null,"iexMarketPercent":0.01261383960274762,"iexVolume":111546,"avgTotalVolume":1833172,"iexBidPrice":19.49,"iexBidSize":100,"iexAskPrice":19.58,"iexAskSize":400,"marketCap":5624828250,"peRatio":587.09,"week52High":24.64,"week52Low":12.59,"ytdChange":0.186085,"lastTradeTime":1570023426877,"isUSMarketOpen":true},{"symbol":"VHC","companyName":"VirnetX Holding Corp.","primaryExchange":"NYSE American","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":5.66,"latestSource":"IEX real time price","latestTime":"9:30:08 AM","latestUpdate":1570023008605,"latestVolume":null,"iexRealtimePrice":5.66,"iexRealtimeSize":100,"iexLastUpdated":1570023008605,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":5.21,"previousVolume":451154,"change":0.45,"changePercent":0.08637,"volume":null,"iexMarketPercent":0.004864329430077475,"iexVolume":1100,"avgTotalVolume":258770,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":390234360,"peRatio":-17.84,"week52High":8.47,"week52Low":2.33,"ytdChange":1.178739,"lastTradeTime":1570023008605,"isUSMarketOpen":true},{"symbol":"AIMT","companyName":"Aimmune Therapeutics, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":21.73,"latestSource":"IEX real time price","latestTime":"9:37:00 AM","latestUpdate":1570023420493,"latestVolume":null,"iexRealtimePrice":21.73,"iexRealtimeSize":100,"iexLastUpdated":1570023420493,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":20.47,"previousVolume":603954,"change":1.26,"changePercent":0.06155,"volume":null,"iexMarketPercent":0.022869626830420407,"iexVolume":9683,"avgTotalVolume":1190222,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":21.84,"iexAskSize":113,"marketCap":1361797370,"peRatio":-5.83,"week52High":36.12,"week52Low":16.95,"ytdChange":-0.097448,"lastTradeTime":1570023420493,"isUSMarketOpen":true},{"symbol":"EXK","companyName":"Endeavour Silver Corp.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":2.38,"latestSource":"IEX real time price","latestTime":"9:36:48 AM","latestUpdate":1570023408493,"latestVolume":null,"iexRealtimePrice":2.38,"iexRealtimeSize":100,"iexLastUpdated":1570023408493,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":2.27,"previousVolume":4818467,"change":0.11,"changePercent":0.04846,"volume":null,"iexMarketPercent":0.006027853319144694,"iexVolume":2600,"avgTotalVolume":4106152,"iexBidPrice":2.37,"iexBidSize":200,"iexAskPrice":0,"iexAskSize":0,"marketCap":327192880,"peRatio":-9.69,"week52High":3.2,"week52Low":1.68,"ytdChange":0.080278,"lastTradeTime":1570023408493,"isUSMarketOpen":true},{"symbol":"CDE","companyName":"Coeur Mining, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":4.99,"latestSource":"IEX real time price","latestTime":"9:36:37 AM","latestUpdate":1570023397695,"latestVolume":null,"iexRealtimePrice":4.99,"iexRealtimeSize":100,"iexLastUpdated":1570023397695,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":4.79,"previousVolume":7212582,"change":0.2,"changePercent":0.04175,"volume":null,"iexMarketPercent":0.006211748330020879,"iexVolume":3463,"avgTotalVolume":7643502,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":5,"iexAskSize":100,"marketCap":1201766650,"peRatio":-8.55,"week52High":5.99,"week52Low":2.78,"ytdChange":0.037592,"lastTradeTime":1570023397695,"isUSMarketOpen":true},{"symbol":"IOVA","companyName":"Iovance Biotherapeutics, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":18.75,"latestSource":"IEX real time price","latestTime":"9:35:46 AM","latestUpdate":1570023346951,"latestVolume":null,"iexRealtimePrice":18.75,"iexRealtimeSize":100,"iexLastUpdated":1570023346951,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":18.21,"previousVolume":1660112,"change":0.54,"changePercent":0.02965,"volume":null,"iexMarketPercent":0.11097393689986283,"iexVolume":5663,"avgTotalVolume":1456816,"iexBidPrice":18.67,"iexBidSize":100,"iexAskPrice":0,"iexAskSize":0,"marketCap":2321831250,"peRatio":-14.27,"week52High":26.59,"week52Low":7.26,"ytdChange":0.956634,"lastTradeTime":1570023346951,"isUSMarketOpen":true},{"symbol":"LEN","companyName":"Lennar Corp.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":57.345,"latestSource":"IEX real time price","latestTime":"9:36:54 AM","latestUpdate":1570023414391,"latestVolume":null,"iexRealtimePrice":57.345,"iexRealtimeSize":100,"iexLastUpdated":1570023414391,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":55.72,"previousVolume":4148890,"change":1.625,"changePercent":0.02916,"volume":null,"iexMarketPercent":0.020403660482256985,"iexVolume":19605,"avgTotalVolume":2855229,"iexBidPrice":57.29,"iexBidSize":100,"iexAskPrice":57.4,"iexAskSize":200,"marketCap":18473462370,"peRatio":9.81,"week52High":57.345,"week52Low":37.29,"ytdChange":0.42355400000000004,"lastTradeTime":1570023414391,"isUSMarketOpen":true},{"symbol":"IAG","companyName":"IAMGOLD Corp.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":3.59,"latestSource":"IEX real time price","latestTime":"9:34:17 AM","latestUpdate":1570023257913,"latestVolume":null,"iexRealtimePrice":3.59,"iexRealtimeSize":100,"iexLastUpdated":1570023257913,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":3.5,"previousVolume":6024268,"change":0.09,"changePercent":0.02571,"volume":null,"iexMarketPercent":0.0013656475900872193,"iexVolume":300,"avgTotalVolume":5446687,"iexBidPrice":3.56,"iexBidSize":500,"iexAskPrice":3.58,"iexAskSize":500,"marketCap":1680120000,"peRatio":-16.78,"week52High":4.16,"week52Low":2.28,"ytdChange":-0.025781000000000002,"lastTradeTime":1570023257913,"isUSMarketOpen":true},{"symbol":"GTE","companyName":"Gran Tierra Energy, Inc.","primaryExchange":"NYSE American","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":1.2,"latestSource":"IEX real time price","latestTime":"9:30:44 AM","latestUpdate":1570023044076,"latestVolume":null,"iexRealtimePrice":1.2,"iexRealtimeSize":400,"iexLastUpdated":1570023044076,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":1.17,"previousVolume":2054376,"change":0.03,"changePercent":0.02564,"volume":null,"iexMarketPercent":0.003696276925067226,"iexVolume":400,"avgTotalVolume":1653895,"iexBidPrice":1.11,"iexBidSize":100,"iexAskPrice":1.18,"iexAskSize":800,"marketCap":449350800,"peRatio":4.43,"week52High":3.96,"week52Low":1.16,"ytdChange":-0.447333,"lastTradeTime":1570023044076,"isUSMarketOpen":true},{"symbol":"JNJ","companyName":"Johnson & Johnson","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":133.305,"latestSource":"IEX real time price","latestTime":"9:37:05 AM","latestUpdate":1570023425029,"latestVolume":null,"iexRealtimePrice":133.305,"iexRealtimeSize":207,"iexLastUpdated":1570023425029,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":129.99,"previousVolume":7706218,"change":3.315,"changePercent":0.0255,"volume":null,"iexMarketPercent":0.052239677238715976,"iexVolume":74724,"avgTotalVolume":7405397,"iexBidPrice":128.1,"iexBidSize":100,"iexAskPrice":133.32,"iexAskSize":100,"marketCap":351814556850,"peRatio":21.81,"week52High":148.99,"week52Low":121,"ytdChange":0.043034,"lastTradeTime":1570023425029,"isUSMarketOpen":true}]

    apiLoser_response = [{"symbol":"QGEN","companyName":"QIAGEN NV","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":25.39,"latestSource":"IEX real time price","latestTime":"3:22:32 PM","latestUpdate":1570562552805,"latestVolume":null,"iexRealtimePrice":25.39,"iexRealtimeSize":100,"iexLastUpdated":1570562552805,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":32.06,"previousVolume":1517319,"change":-6.67,"changePercent":-0.20805,"volume":null,"iexMarketPercent":0.03753925487756964,"iexVolume":408362,"avgTotalVolume":964725,"iexBidPrice":25.37,"iexBidSize":100,"iexAskPrice":0,"iexAskSize":0,"marketCap":5762666740,"peRatio":29.38,"week52High":41.55,"week52Low":25.39,"ytdChange":-0.2687,"lastTradeTime":1570562552805,"isUSMarketOpen":true},{"symbol":"PBYI","companyName":"Puma Biotechnology, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":8.085,"latestSource":"IEX real time price","latestTime":"3:22:35 PM","latestUpdate":1570562555467,"latestVolume":null,"iexRealtimePrice":8.085,"iexRealtimeSize":200,"iexLastUpdated":1570562555467,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":10.07,"previousVolume":727665,"change":-1.985,"changePercent":-0.19712,"volume":null,"iexMarketPercent":0.0348795906273085,"iexVolume":152792,"avgTotalVolume":1361092,"iexBidPrice":8,"iexBidSize":100,"iexAskPrice":8.25,"iexAskSize":200,"marketCap":314482245,"peRatio":-3.36,"week52High":46.41,"week52Low":8.085,"ytdChange":-0.732637,"lastTradeTime":1570562535711,"isUSMarketOpen":true},{"symbol":"AZZ","companyName":"AZZ, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":36.79,"latestSource":"IEX real time price","latestTime":"3:20:48 PM","latestUpdate":1570562448658,"latestVolume":null,"iexRealtimePrice":36.79,"iexRealtimeSize":3,"iexLastUpdated":1570562448658,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":43.01,"previousVolume":226514,"change":-6.22,"changePercent":-0.14462,"volume":null,"iexMarketPercent":0.061395694643829934,"iexVolume":35839,"avgTotalVolume":136601,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":37,"iexAskSize":100,"marketCap":962132080,"peRatio":16.92,"week52High":50.36,"week52Low":36.79,"ytdChange":-0.085521,"lastTradeTime":1570562448658,"isUSMarketOpen":true},{"symbol":"AMEH","companyName":"Apollo Medical Holdings, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":13.71,"latestSource":"IEX real time price","latestTime":"3:21:42 PM","latestUpdate":1570562502845,"latestVolume":null,"iexRealtimePrice":13.71,"iexRealtimeSize":100,"iexLastUpdated":1570562502845,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":15.83,"previousVolume":112681,"change":-2.12,"changePercent":-0.13392,"volume":null,"iexMarketPercent":0.02491835273996474,"iexVolume":29314,"avgTotalVolume":274309,"iexBidPrice":13.05,"iexBidSize":600,"iexAskPrice":0,"iexAskSize":0,"marketCap":492189000,"peRatio":46.66,"week52High":23.32,"week52Low":13.36,"ytdChange":-0.324615,"lastTradeTime":1570562502845,"isUSMarketOpen":true},{"symbol":"EZPW","companyName":"EZCORP, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":5.365,"latestSource":"IEX real time price","latestTime":"3:21:42 PM","latestUpdate":1570562502159,"latestVolume":null,"iexRealtimePrice":5.365,"iexRealtimeSize":100,"iexLastUpdated":1570562502159,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":6.19,"previousVolume":593983,"change":-0.825,"changePercent":-0.13328,"volume":null,"iexMarketPercent":0.04950672171580187,"iexVolume":80531,"avgTotalVolume":547473,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":5.37,"iexAskSize":358,"marketCap":297463879,"peRatio":138.99,"week52High":11.25,"week52Low":5.365,"ytdChange":-0.369082,"lastTradeTime":1570562502159,"isUSMarketOpen":true},{"symbol":"SDC","companyName":"SmileDirectClub, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":11.82,"latestSource":"IEX real time price","latestTime":"3:22:28 PM","latestUpdate":1570562548505,"latestVolume":null,"iexRealtimePrice":11.82,"iexRealtimeSize":122,"iexLastUpdated":1570562548505,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":13.49,"previousVolume":7607161,"change":-1.67,"changePercent":-0.1238,"volume":null,"iexMarketPercent":0.07415016981149379,"iexVolume":654927,"avgTotalVolume":9235128,"iexBidPrice":11.75,"iexBidSize":400,"iexAskPrice":11.83,"iexAskSize":200,"marketCap":1245690864,"peRatio":null,"week52High":21.1,"week52Low":11.82,"ytdChange":-0.314562,"lastTradeTime":1570562548505,"isUSMarketOpen":true},{"symbol":"NKTR","companyName":"Nektar Therapeutics","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":16.445,"latestSource":"IEX real time price","latestTime":"3:20:53 PM","latestUpdate":1570562453590,"latestVolume":null,"iexRealtimePrice":16.445,"iexRealtimeSize":100,"iexLastUpdated":1570562453590,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":18.67,"previousVolume":2589611,"change":-2.225,"changePercent":-0.11918,"volume":null,"iexMarketPercent":0.057716549834001665,"iexVolume":258458,"avgTotalVolume":4308030,"iexBidPrice":16.38,"iexBidSize":800,"iexAskPrice":16.45,"iexAskSize":100,"marketCap":2882380930,"peRatio":-6.75,"week52High":53.03,"week52Low":16.445,"ytdChange":-0.573593,"lastTradeTime":1570562453590,"isUSMarketOpen":true},{"symbol":"SIG","companyName":"Signet Jewelers Ltd.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":15.895,"latestSource":"IEX real time price","latestTime":"3:22:11 PM","latestUpdate":1570562531766,"latestVolume":null,"iexRealtimePrice":15.895,"iexRealtimeSize":1,"iexLastUpdated":1570562531766,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":17.84,"previousVolume":3726535,"change":-1.945,"changePercent":-0.10902,"volume":null,"iexMarketPercent":0.02897452968534127,"iexVolume":72374,"avgTotalVolume":4045818,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":15.93,"iexAskSize":100,"marketCap":830720385,"peRatio":-3.78,"week52High":62.95,"week52Low":10.4,"ytdChange":-0.569558,"lastTradeTime":1570562531766,"isUSMarketOpen":true},{"symbol":"CRSP","companyName":"CRISPR Therapeutics AG","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":36.695,"latestSource":"IEX real time price","latestTime":"3:21:11 PM","latestUpdate":1570562471430,"latestVolume":null,"iexRealtimePrice":36.695,"iexRealtimeSize":300,"iexLastUpdated":1570562471430,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":41.08,"previousVolume":462754,"change":-4.385,"changePercent":-0.10674,"volume":null,"iexMarketPercent":0.02401026415926487,"iexVolume":19163,"avgTotalVolume":394683,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":2005840438,"peRatio":-9.34,"week52High":53.9,"week52Low":22.22,"ytdChange":0.268553,"lastTradeTime":1570562471430,"isUSMarketOpen":true},{"symbol":"AMBA","companyName":"Ambarella, Inc.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":51.915,"latestSource":"IEX real time price","latestTime":"3:22:06 PM","latestUpdate":1570562526440,"latestVolume":null,"iexRealtimePrice":51.915,"iexRealtimeSize":1,"iexLastUpdated":1570562526440,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":57.22,"previousVolume":501842,"change":-5.305,"changePercent":-0.09271,"volume":null,"iexMarketPercent":0.034950881850938746,"iexVolume":161259,"avgTotalVolume":1074325,"iexBidPrice":51.7,"iexBidSize":134,"iexAskPrice":51.97,"iexAskSize":112,"marketCap":1716309900,"peRatio":-41.05,"week52High":67.14,"week52Low":30,"ytdChange":0.495411,"lastTradeTime":1570562526440,"isUSMarketOpen":true}]

    for d in apiLoser_response:
        d.update((k, "{:.2%}".format(v)) for k, v in d.items() if k == "changePercent")

    earning = {"bto":[{"consensusEPS":"0.96","announceTime":"BTO","numberOfEstimates":23,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"YUM","reportDate":"2019-10-08","quote":{"symbol":"YUM","companyName":"Yum! Brands, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":113.15,"latestSource":"IEX real time price","latestTime":"9:33:33 AM","latestUpdate":1570541613982,"latestVolume":null,"iexRealtimePrice":113.15,"iexRealtimeSize":100,"iexLastUpdated":1570541613982,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":113.69,"previousVolume":1016587,"change":-0.54,"changePercent":-0.00475,"volume":null,"iexMarketPercent":0.010909286328460877,"iexVolume":203,"avgTotalVolume":1635395,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":116.03,"iexAskSize":100,"marketCap":34429960900,"peRatio":26.39,"week52High":119.72,"week52Low":84.53,"ytdChange":0.23857899999999999,"lastTradeTime":1570541613982,"isUSMarketOpen":true}},{"consensusEPS":"2.07","announceTime":"BTO","numberOfEstimates":25,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"DPZ","reportDate":"2019-10-08","quote":{"symbol":"DPZ","companyName":"Domino's Pizza, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":233.665,"latestSource":"IEX real time price","latestTime":"9:34:17 AM","latestUpdate":1570541657347,"latestVolume":null,"iexRealtimePrice":233.665,"iexRealtimeSize":100,"iexLastUpdated":1570541657347,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":242.21,"previousVolume":2023823,"change":-8.545,"changePercent":-0.03528,"volume":null,"iexMarketPercent":0.0184340366699883,"iexVolume":9120,"avgTotalVolume":838921,"iexBidPrice":231,"iexBidSize":100,"iexAskPrice":239.9,"iexAskSize":100,"marketCap":9635494293,"peRatio":25.26,"week52High":302.04,"week52Low":220.9,"ytdChange":-0.03976,"lastTradeTime":1570541657347,"isUSMarketOpen":true}},{"consensusEPS":"1.88","announceTime":"BTO","numberOfEstimates":5,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"HELE","reportDate":"2019-10-08","quote":{"symbol":"HELE","companyName":"Helen of Troy Ltd.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":166.8,"latestSource":"IEX real time price","latestTime":"9:34:03 AM","latestUpdate":1570541643438,"latestVolume":null,"iexRealtimePrice":166.8,"iexRealtimeSize":50,"iexLastUpdated":1570541643438,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":159.21,"previousVolume":353874,"change":7.59,"changePercent":0.04767,"volume":null,"iexMarketPercent":0.018571470683606994,"iexVolume":1260,"avgTotalVolume":198235,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":4187847600,"peRatio":24.28,"week52High":166.8,"week52Low":108.3,"ytdChange":0.269636,"lastTradeTime":1570541630324,"isUSMarketOpen":true}},{"consensusEPS":"-0.09","announceTime":"BTO","numberOfEstimates":7,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"BTU","reportDate":"2019-10-08","quote":{"symbol":"BTU","companyName":"Peabody Energy Corp.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":14.31,"latestSource":"IEX real time price","latestTime":"9:33:47 AM","latestUpdate":1570541627487,"latestVolume":null,"iexRealtimePrice":14.31,"iexRealtimeSize":100,"iexLastUpdated":1570541627487,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":14.49,"previousVolume":571223,"change":-0.18,"changePercent":-0.01242,"volume":null,"iexMarketPercent":0.013152702880441932,"iexVolume":100,"avgTotalVolume":1050689,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":1482516000,"peRatio":3.32,"week52High":37.37,"week52Low":13.89,"ytdChange":-0.5472509999999999,"lastTradeTime":1570541627487,"isUSMarketOpen":true}},{"consensusEPS":"0.56","announceTime":"BTO","numberOfEstimates":2,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"AZZ","reportDate":"2019-10-08","quote":{"symbol":"AZZ","companyName":"AZZ, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":39.78,"latestSource":"IEX real time price","latestTime":"9:33:19 AM","latestUpdate":1570541599890,"latestVolume":null,"iexRealtimePrice":39.78,"iexRealtimeSize":100,"iexLastUpdated":1570541599890,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":43.01,"previousVolume":226514,"change":-3.23,"changePercent":-0.0751,"volume":null,"iexMarketPercent":0.004784460073680685,"iexVolume":100,"avgTotalVolume":136601,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":1040326560,"peRatio":18.3,"week52High":50.36,"week52Low":37.43,"ytdChange":-0.016001,"lastTradeTime":1570541599890,"isUSMarketOpen":true}},{"consensusEPS":"-0.01","announceTime":"BTO","numberOfEstimates":2,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"THERF","reportDate":"2019-10-08","quote":{"symbol":"THERF","companyName":"Theratechnologies, Inc.","primaryExchange":"US OTC","calculationPrice":"close","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":4.16,"latestSource":"Close","latestTime":"October 7, 2019","latestUpdate":1570420800000,"latestVolume":0,"iexRealtimePrice":null,"iexRealtimeSize":null,"iexLastUpdated":null,"delayedPrice":0,"delayedPriceTime":1570469852000,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":4.08,"previousVolume":17631,"change":0.08,"changePercent":0.01961,"volume":0,"iexMarketPercent":null,"iexVolume":null,"avgTotalVolume":27707,"iexBidPrice":null,"iexBidSize":null,"iexAskPrice":null,"iexAskSize":null,"marketCap":320124480,"peRatio":-62.65,"week52High":7.29,"week52Low":3.67,"ytdChange":-0.350497,"lastTradeTime":1570469852000}},{"consensusEPS":"0.12","announceTime":"BTO","numberOfEstimates":1,"fiscalPeriod":"Q2 2019","fiscalEndDate":"2019-06-30","symbol":"EROS","reportDate":"2019-10-08","quote":{"symbol":"EROS","companyName":"Eros International Plc","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":1.58,"latestSource":"IEX real time price","latestTime":"9:33:51 AM","latestUpdate":1570541631243,"latestVolume":null,"iexRealtimePrice":1.58,"iexRealtimeSize":600,"iexLastUpdated":1570541631243,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":1.73,"previousVolume":7943758,"change":-0.15,"changePercent":-0.08671,"volume":null,"iexMarketPercent":0.0032199506453333745,"iexVolume":2517,"avgTotalVolume":5542855,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":94387170,"peRatio":-0.28,"week52High":12.81,"week52Low":1.14,"ytdChange":-0.8787769999999999,"lastTradeTime":1570541631243,"isUSMarketOpen":true}}],"amc":[{"consensusEPS":"0.28","announceTime":"AMC","numberOfEstimates":8,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"LEVI","reportDate":"2019-10-08","quote":{"symbol":"LEVI","companyName":"Levi Strauss & Co.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":19.615,"latestSource":"IEX real time price","latestTime":"9:31:17 AM","latestUpdate":1570541477725,"latestVolume":null,"iexRealtimePrice":19.615,"iexRealtimeSize":200,"iexLastUpdated":1570541477725,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":19.77,"previousVolume":1166100,"change":-0.155,"changePercent":-0.00784,"volume":null,"iexMarketPercent":0.004485411200071766,"iexVolume":200,"avgTotalVolume":771780,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":7698880046,"peRatio":18.82,"week52High":24.5,"week52Low":16,"ytdChange":0.155101,"lastTradeTime":1570541477725,"isUSMarketOpen":true}}],"other":[{"consensusEPS":"0.19","announceTime":"DMT","numberOfEstimates":6,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"TRNO","reportDate":"2019-10-08","quote":{"symbol":"TRNO","companyName":"Terreno Realty Corp.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":51.845,"latestSource":"IEX real time price","latestTime":"9:32:15 AM","latestUpdate":1570541535506,"latestVolume":null,"iexRealtimePrice":51.845,"iexRealtimeSize":100,"iexLastUpdated":1570541535506,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":51.89,"previousVolume":222115,"change":-0.045,"changePercent":-0.00087,"volume":null,"iexMarketPercent":0.03679175864606328,"iexVolume":100,"avgTotalVolume":306606,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":3398123495,"peRatio":53.71,"week52High":52.15,"week52Low":33.52,"ytdChange":0.514166,"lastTradeTime":1570541535506,"isUSMarketOpen":true}},{"consensusEPS":"0.07","announceTime":"DMT","numberOfEstimates":6,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"CISEY","reportDate":"2019-10-08","quote":{"symbol":"CISEY","companyName":"China Steel Corp.","primaryExchange":"US OTC","calculationPrice":"previousclose","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":null,"latestSource":"N/A","latestTime":"N/A","latestUpdate":null,"latestVolume":0,"iexRealtimePrice":null,"iexRealtimeSize":null,"iexLastUpdated":null,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":null,"previousVolume":null,"change":null,"changePercent":null,"volume":0,"iexMarketPercent":null,"iexVolume":null,"avgTotalVolume":null,"iexBidPrice":null,"iexBidSize":null,"iexAskPrice":null,"iexAskSize":null,"marketCap":null,"peRatio":null,"week52High":0,"week52Low":0,"ytdChange":0,"lastTradeTime":null}}]}

    btoEarning = earning['bto']
    amcEarning = earning['amc']
    dmtEarning = earning['other']

    return render(request, 'home.html', {'Gainer_response': apiGainer_response, 'Loser_response': apiLoser_response, 'earning': earning, 'bto':btoEarning, 'amc':amcEarning, 'dmt':dmtEarning})

def about(request):
    null = None
    false = False
    true = True
    apiLoser_response = {"symbol":"UNFI","companyName":"United Natural Foods, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":8.425,"latestSource":"IEX real time price","latestTime":"9:46:55 AM","latestUpdate":1570024015610,"latestVolume":null,"iexRealtimePrice":8.425,"iexRealtimeSize":10,"iexLastUpdated":1570024015610,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":11.07,"previousVolume":2033687,"change":-2.645,"changePercent":-0.23893,"volume":null,"iexMarketPercent":0.015348332332389815,"iexVolume":19244,"avgTotalVolume":1113461,"iexBidPrice":8.01,"iexBidSize":190,"iexAskPrice":0,"iexAskSize":0,"marketCap":444031200,"peRatio":-1.58,"week52High":30.29,"week52Low":6.75,"ytdChange":-0.225194,"lastTradeTime":1570024015610,"isUSMarketOpen":true}


    apiLoser_response.update((k, "{:.2%}".format(v)) for k, v in apiLoser_response.items() if k == "changePercent")

    markCap = apiLoser_response['marketCap']

    return render(request, 'about.html', {'Loser_response': apiLoser_response, 'markCap': markCap})

def earning(request):
    import requests
    import json
    null = None
    false = False
    true = True
    earning = {"bto":[{"consensusEPS":"0.96","announceTime":"BTO","numberOfEstimates":23,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"YUM","reportDate":"2019-10-08","quote":{"symbol":"YUM","companyName":"Yum! Brands, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":113.15,"latestSource":"IEX real time price","latestTime":"9:33:33 AM","latestUpdate":1570541613982,"latestVolume":null,"iexRealtimePrice":113.15,"iexRealtimeSize":100,"iexLastUpdated":1570541613982,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":113.69,"previousVolume":1016587,"change":-0.54,"changePercent":-0.00475,"volume":null,"iexMarketPercent":0.010909286328460877,"iexVolume":203,"avgTotalVolume":1635395,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":116.03,"iexAskSize":100,"marketCap":34429960900,"peRatio":26.39,"week52High":119.72,"week52Low":84.53,"ytdChange":0.23857899999999999,"lastTradeTime":1570541613982,"isUSMarketOpen":true}},{"consensusEPS":"2.07","announceTime":"BTO","numberOfEstimates":25,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"DPZ","reportDate":"2019-10-08","quote":{"symbol":"DPZ","companyName":"Domino's Pizza, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":233.665,"latestSource":"IEX real time price","latestTime":"9:34:17 AM","latestUpdate":1570541657347,"latestVolume":null,"iexRealtimePrice":233.665,"iexRealtimeSize":100,"iexLastUpdated":1570541657347,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":242.21,"previousVolume":2023823,"change":-8.545,"changePercent":-0.03528,"volume":null,"iexMarketPercent":0.0184340366699883,"iexVolume":9120,"avgTotalVolume":838921,"iexBidPrice":231,"iexBidSize":100,"iexAskPrice":239.9,"iexAskSize":100,"marketCap":9635494293,"peRatio":25.26,"week52High":302.04,"week52Low":220.9,"ytdChange":-0.03976,"lastTradeTime":1570541657347,"isUSMarketOpen":true}},{"consensusEPS":"1.88","announceTime":"BTO","numberOfEstimates":5,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"HELE","reportDate":"2019-10-08","quote":{"symbol":"HELE","companyName":"Helen of Troy Ltd.","primaryExchange":"NASDAQ","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":166.8,"latestSource":"IEX real time price","latestTime":"9:34:03 AM","latestUpdate":1570541643438,"latestVolume":null,"iexRealtimePrice":166.8,"iexRealtimeSize":50,"iexLastUpdated":1570541643438,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":159.21,"previousVolume":353874,"change":7.59,"changePercent":0.04767,"volume":null,"iexMarketPercent":0.018571470683606994,"iexVolume":1260,"avgTotalVolume":198235,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":4187847600,"peRatio":24.28,"week52High":166.8,"week52Low":108.3,"ytdChange":0.269636,"lastTradeTime":1570541630324,"isUSMarketOpen":true}},{"consensusEPS":"-0.09","announceTime":"BTO","numberOfEstimates":7,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"BTU","reportDate":"2019-10-08","quote":{"symbol":"BTU","companyName":"Peabody Energy Corp.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":14.31,"latestSource":"IEX real time price","latestTime":"9:33:47 AM","latestUpdate":1570541627487,"latestVolume":null,"iexRealtimePrice":14.31,"iexRealtimeSize":100,"iexLastUpdated":1570541627487,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":14.49,"previousVolume":571223,"change":-0.18,"changePercent":-0.01242,"volume":null,"iexMarketPercent":0.013152702880441932,"iexVolume":100,"avgTotalVolume":1050689,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":1482516000,"peRatio":3.32,"week52High":37.37,"week52Low":13.89,"ytdChange":-0.5472509999999999,"lastTradeTime":1570541627487,"isUSMarketOpen":true}},{"consensusEPS":"0.56","announceTime":"BTO","numberOfEstimates":2,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"AZZ","reportDate":"2019-10-08","quote":{"symbol":"AZZ","companyName":"AZZ, Inc.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":39.78,"latestSource":"IEX real time price","latestTime":"9:33:19 AM","latestUpdate":1570541599890,"latestVolume":null,"iexRealtimePrice":39.78,"iexRealtimeSize":100,"iexLastUpdated":1570541599890,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":43.01,"previousVolume":226514,"change":-3.23,"changePercent":-0.0751,"volume":null,"iexMarketPercent":0.004784460073680685,"iexVolume":100,"avgTotalVolume":136601,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":1040326560,"peRatio":18.3,"week52High":50.36,"week52Low":37.43,"ytdChange":-0.016001,"lastTradeTime":1570541599890,"isUSMarketOpen":true}},{"consensusEPS":"-0.01","announceTime":"BTO","numberOfEstimates":2,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"THERF","reportDate":"2019-10-08","quote":{"symbol":"THERF","companyName":"Theratechnologies, Inc.","primaryExchange":"US OTC","calculationPrice":"close","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":4.16,"latestSource":"Close","latestTime":"October 7, 2019","latestUpdate":1570420800000,"latestVolume":0,"iexRealtimePrice":null,"iexRealtimeSize":null,"iexLastUpdated":null,"delayedPrice":0,"delayedPriceTime":1570469852000,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":4.08,"previousVolume":17631,"change":0.08,"changePercent":0.01961,"volume":0,"iexMarketPercent":null,"iexVolume":null,"avgTotalVolume":27707,"iexBidPrice":null,"iexBidSize":null,"iexAskPrice":null,"iexAskSize":null,"marketCap":320124480,"peRatio":-62.65,"week52High":7.29,"week52Low":3.67,"ytdChange":-0.350497,"lastTradeTime":1570469852000}},{"consensusEPS":"0.12","announceTime":"BTO","numberOfEstimates":1,"fiscalPeriod":"Q2 2019","fiscalEndDate":"2019-06-30","symbol":"EROS","reportDate":"2019-10-08","quote":{"symbol":"EROS","companyName":"Eros International Plc","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":1.58,"latestSource":"IEX real time price","latestTime":"9:33:51 AM","latestUpdate":1570541631243,"latestVolume":null,"iexRealtimePrice":1.58,"iexRealtimeSize":600,"iexLastUpdated":1570541631243,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":1.73,"previousVolume":7943758,"change":-0.15,"changePercent":-0.08671,"volume":null,"iexMarketPercent":0.0032199506453333745,"iexVolume":2517,"avgTotalVolume":5542855,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":94387170,"peRatio":-0.28,"week52High":12.81,"week52Low":1.14,"ytdChange":-0.8787769999999999,"lastTradeTime":1570541631243,"isUSMarketOpen":true}}],"amc":[{"consensusEPS":"0.28","announceTime":"AMC","numberOfEstimates":8,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-08-31","symbol":"LEVI","reportDate":"2019-10-08","quote":{"symbol":"LEVI","companyName":"Levi Strauss & Co.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":19.615,"latestSource":"IEX real time price","latestTime":"9:31:17 AM","latestUpdate":1570541477725,"latestVolume":null,"iexRealtimePrice":19.615,"iexRealtimeSize":200,"iexLastUpdated":1570541477725,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":19.77,"previousVolume":1166100,"change":-0.155,"changePercent":-0.00784,"volume":null,"iexMarketPercent":0.004485411200071766,"iexVolume":200,"avgTotalVolume":771780,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":7698880046,"peRatio":18.82,"week52High":24.5,"week52Low":16,"ytdChange":0.155101,"lastTradeTime":1570541477725,"isUSMarketOpen":true}}],"other":[{"consensusEPS":"0.19","announceTime":"DMT","numberOfEstimates":6,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"TRNO","reportDate":"2019-10-08","quote":{"symbol":"TRNO","companyName":"Terreno Realty Corp.","primaryExchange":"New York Stock Exchange","calculationPrice":"tops","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":51.845,"latestSource":"IEX real time price","latestTime":"9:32:15 AM","latestUpdate":1570541535506,"latestVolume":null,"iexRealtimePrice":51.845,"iexRealtimeSize":100,"iexLastUpdated":1570541535506,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":51.89,"previousVolume":222115,"change":-0.045,"changePercent":-0.00087,"volume":null,"iexMarketPercent":0.03679175864606328,"iexVolume":100,"avgTotalVolume":306606,"iexBidPrice":0,"iexBidSize":0,"iexAskPrice":0,"iexAskSize":0,"marketCap":3398123495,"peRatio":53.71,"week52High":52.15,"week52Low":33.52,"ytdChange":0.514166,"lastTradeTime":1570541535506,"isUSMarketOpen":true}},{"consensusEPS":"0.07","announceTime":"DMT","numberOfEstimates":6,"fiscalPeriod":"Q3 2019","fiscalEndDate":"2019-09-30","symbol":"CISEY","reportDate":"2019-10-08","quote":{"symbol":"CISEY","companyName":"China Steel Corp.","primaryExchange":"US OTC","calculationPrice":"previousclose","open":null,"openTime":null,"close":null,"closeTime":null,"high":null,"low":null,"latestPrice":null,"latestSource":"N/A","latestTime":"N/A","latestUpdate":null,"latestVolume":0,"iexRealtimePrice":null,"iexRealtimeSize":null,"iexLastUpdated":null,"delayedPrice":null,"delayedPriceTime":null,"extendedPrice":null,"extendedChange":null,"extendedChangePercent":null,"extendedPriceTime":null,"previousClose":null,"previousVolume":null,"change":null,"changePercent":null,"volume":0,"iexMarketPercent":null,"iexVolume":null,"avgTotalVolume":null,"iexBidPrice":null,"iexBidSize":null,"iexAskPrice":null,"iexAskSize":null,"marketCap":null,"peRatio":null,"week52High":0,"week52Low":0,"ytdChange":0,"lastTradeTime":null}}]}



    btoEarning = earning['bto']
    for d in btoEarning:
        if d['quote']['ytdChange']:
            d['quote']['ytdChange'] = "{:.2%}".format(d['quote']['ytdChange'])
        if d['quote']['marketCap']:
            d['quote']['marketCap'] = format(d['quote']['marketCap'], ',d')

    amcEarning = earning['amc']
    for d in amcEarning:
        if d['quote']['ytdChange']:
            d['quote']['ytdChange'] = "{:.2%}".format(d['quote']['ytdChange'])
        if d['quote']['marketCap']:
            d['quote']['marketCap'] = format(d['quote']['marketCap'], ',d')

    dmtEarning = earning['other']
    for d in dmtEarning:
        if d['quote']['ytdChange']:
            d['quote']['ytdChange'] = "{:.2%}".format(d['quote']['ytdChange'])
        if d['quote']['marketCap']:
            d['quote']['marketCap'] = format(d['quote']['marketCap'], ',d')

    return render(request, 'earning.html', {'earning': earning, 'bto':btoEarning, 'amc':amcEarning, 'dmt':dmtEarning})
